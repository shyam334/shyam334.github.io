<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Travis CI build stats</title>
	<link rel="stylesheet" href="style.css" />
	<script>
  	window.addEventListener("message", function(event) {
    		console.log("received token: " + event.data.token);
  	});

	var iframe = $('<iframe />').hide();
  	iframe.appendTo('body');
  	iframe.attr('src', "https://api.travis-ci.org/auth/post_message");
	</script>
</head>
<body>
	<h1>Travis CI build stats</h1>
	<form>
		<label>Repository:</label>
		<input id="repo-name" type="text" placeholder="owner/repo" />
		<input class="button" type="submit" value="Render" />
	</form>

	<div class="column">
		<h2>Build durations (in minutes)</h2>
		<h3>duration = sum of job run times</h3>
		<div id="build-times-duration"></div>
	</div>

	<div class="column">
		<h2>Build wall times (in minutes)</h2>
		<h3>wall time = finished_at - started_at</h3>
		<div id="build-times"></div>
	</div>

	<div class="column">
		<h2>Builds per day</h2>
		<div id="build-counts"></div>
	</div>

	<script src="d3.min.js"></script>
	<script src="script.js"></script>

</body>
</html>
